!function(t){t.fn.tableWizard=function(e,o,n){var r=t.extend(!0,{},t.fn.tableWizard.defaults,n),a=this,i=null!==r.stickyKit&&"object"==typeof r.stickyKit?!0:!1;r.navButtons._wrapper="."+r.navButtons.wrapper,r.navButtons._buttons="."+r.navButtons.buttons,r.navButtons._prev="."+r.navButtons.prev,r.navButtons._next="."+r.navButtons.next,r.table._outerWrapper="."+r.table.outerWrapper,r.table._overflowWrapper="."+r.table.overflowWrapper,i&&(r.stickyKit._wrapper="."+r.stickyKit.wrapper,r.stickyKit._innerWrapper="."+r.stickyKit.innerWrapper,r.stickyKit._elements="."+r.stickyKit.elements);var s,l,u,p,c,v,b=function(){r.navButtons.$wrapper=t(r.navButtons._wrapper),r.navButtons.$buttons=t(r.navButtons._buttons),r.navButtons.$prev=t(r.navButtons._prev),r.navButtons.$next=t(r.navButtons._next),r.table.$outerWrapper=t(r.table._outerWrapper),r.table.$overflowWrapper=t(r.table._overflowWrapper)},f=function(){r.stickyKit.$wrapper=t(r.stickyKit._wrapper),r.stickyKit.$innerWrapper=t(r.stickyKit._innerWrapper),r.stickyKit.$elements=t(r.stickyKit._elements)},d=[];if(r.touchMove)var w,h;var k=function(){var e=0;return a.find(o).each(function(o,n){var r=t(n).siblings().addBack().length;r>e&&(e=r)}),e},y=function(){var e=new jQuery;return a.find(o).each(function(o,n){e=e.add(t(n).siblings().addBack().slice(r.table.scrollableColFirstIndex))}),e},m=function(){if(0!==d.length){var e=0;return t.each(d,function(t,o){return o>=c?(e=r.table.numOfScrollableCols[o],!1):void 0}),e}return r.table.numOfScrollableCols},B=function(t){return null==t&&(t=u),100/(t+(s-r.table.totalNumberOfScrollableCols))},W=function(){var e=a.closest(r.table._outerWrapper);0===e.length?a.wrap(t("<div/>",{"class":r.table.outerWrapper,style:"position: relative; overflow-y: visible;"})):e.css({position:"relative","overflow-y":"visible"})},$=function(){var e=a.parent().siblings(r.navButtons._wrapper);0===e.length&&a.before(t("<div/>",{"class":r.navButtons.wrapper}).append(t("<button/>",{"class":r.navButtons.buttons+" "+r.navButtons.prev,type:"button",html:r.navButtons.prevHTML})).append(t("<button/>",{"class":r.navButtons.buttons+" "+r.navButtons.next,type:"button",html:r.navButtons.nextHTML})))},_=function(){a.parent().hasClass(r.table.overflowWrapper)||a.wrap(t("<div/>",{"class":r.table.overflowWrapper,style:"position: relative; overflow: hidden; width: 100%; height: 100%;"}))},K=function(){var o=t("<div/>",{"class":r.stickyKit.wrapper,style:"position: absolute; overflow: hidden; top: 0; right: 0;"});o.append(t("<div/>",{"class":r.stickyKit.innerWrapper})),l.filter(e).each(function(){o.find(r.stickyKit._innerWrapper).append(t("<div/>",{"class":r.stickyKit.elements,style:"display: inline-block; position: relative; top: 0; box-sizing: border-box;",html:t(this).html()}))}),a.before(o)},g=function(){r.stickyKit.$wrapper.stick_in_parent({spacer:!1}),l=l.add(r.stickyKit.$elements),r.stickyKit.$elements.outerWidth(100/r.table.totalNumberOfScrollableCols+"%")};this.updateButtons=function(){r.navButtons.$buttons.prop("disabled",!1),1>p&&r.navButtons.$prev.prop("disabled",!0),p+1>=s-u&&r.navButtons.$next.prop("disabled",!0)},this.moveColumns=function(t,e){isNaN(t)||(p=t),null==e&&(e=!1),p+u>r.table.totalNumberOfScrollableCols&&(p=r.table.totalNumberOfScrollableCols-u),e?TweenMax.set(l,{xPercent:100*-p}):TweenMax.to(l,r.animation.speed,{xPercent:100*-p})},this.refactorTable=function(t){null==t&&(t=u),0===t?(a.css("table-layout","").width(""),a.find(e).width(""),l.css("transform",""),r.navButtons.$wrapper.hide(),r.table.$overflowWrapper.css({position:"",overflow:""}),r.table.$outerWrapper.addClass(r.table.disabledClass),i&&r.stickyKit.$wrapper.hide(),r.touchMove&&(l.off("touchstart.tableWizardNavTouchStart"),l.off("touchstart.tableWizardNavTouchMove"),l.off("touchstart.tableWizardNavTouchEnd"))):(v=B(t),r.navButtons.$wrapper.css("width",t*v+"%"),a.css("table-layout","fixed").css("width",s*v+"%"),a.find(e).css("width",v+"%"),r.navButtons.$wrapper.show(),r.table.$overflowWrapper.css({position:"relative",overflow:"hidden"}),r.table.$outerWrapper.removeClass(r.table.disabledClass),i&&(r.stickyKit.$wrapper.show().css({position:"absolute",top:"0",right:"0"}),r.stickyKit.$wrapper.css("width",t*v+"%"),r.stickyKit.$innerWrapper.css("width",100*r.table.totalNumberOfScrollableCols/t+"%")),r.touchMove&&(l.on("touchstart.tableWizardNavTouchStart",M),l.on("touchmove.tableWizardNavTouchMove",N),l.on("touchend.tableWizardNavTouchEnd",z)))};var x=function(){W(),$(),_(),b(),c=r.table.$outerWrapper.width(),s=k(),l=y(),null!==r.table.numOfScrollableCols&&"object"==typeof r.table.numOfScrollableCols&&(d=Object.keys(r.table.numOfScrollableCols).sort(function(t,e){return t-e})),u=m(),v=B(),p=0,i&&(K(),f(),g()),a.refactorTable(),u>0&&(a.moveColumns(p,!0),a.updateButtons(),i&&S()),r.navButtons.$wrapper.on("click.tableWizardNavButtons",r.navButtons._buttons,C),t(window).on("resize.tableWizardWindowResize",T)},C=function(e){if(t(e.target).is(r.navButtons.$prev))p--;else{if(!t(e.target).is(r.navButtons.$next))return;p++}a.moveColumns(p),a.updateButtons()},T=function(){if(c=r.table.$outerWrapper.width(),u!==(u=m())&&(a.refactorTable(),u>0&&(a.moveColumns(p,!0),a.updateButtons())),u>0&&i&&S(),r.forceReflow){var e=t(window).scrollTop();r.table.$outerWrapper.hide().show(0),t(window).scrollTop(e)}},M=function(e){w=e.originalEvent.touches[0].clientX+p*t(this).outerWidth(),h=-p},N=function(e){var o=e.originalEvent.touches[0].clientX,n=o-w;h=n/t(this).outerWidth();var r=100*h;TweenMax.set(l,{xPercent:function(){return r}})},z=function(t){p=-Math.round(h),0>p&&(p=0),a.moveColumns(p,!1),a.updateButtons()},S=function(){var e=u*v+"%",o=r.navButtons.$wrapper.width(),n=(r.navButtons.$wrapper.outerWidth(),Math.round(t(window).width()-(r.navButtons.$wrapper.offset().left+o))+"px");r.stickyKit.$wrapper.off("sticky_kit:stick").on("sticky_kit:stick",function(t){r.stickyKit.$wrapper.css({right:n,width:o})}).off("sticky_kit:unstick").on("sticky_kit:unstick",function(t){r.stickyKit.$wrapper.css({position:"absolute",right:"0",width:e})}).off("sticky_kit:bottom").on("sticky_kit:bottom",function(t){r.stickyKit.$wrapper.css({position:"absolute",right:"0",width:e})}).off("sticky_kit:unbottom").on("sticky_kit:unbottom",function(t){r.stickyKit.$wrapper.css({right:n,width:o})}),t(document.body).trigger("sticky_kit:recalc")};return x(),this},t.fn.tableWizard.defaults={table:{outerWrapper:"outer-table-wrapper",overflowWrapper:"overflow-fix-wrapper",disabledClass:"no-responsive-table",scrollableColFirstIndex:0,totalNumberOfScrollableCols:0,numOfScrollableCols:0},navButtons:{wrapper:"column-navigation-button-wrapper",buttons:"column-navigation-button",prev:"column-navigation-button_prev",next:"column-navigation-button_next",prevHTML:"<<",nextHTML:">>"},animation:{speed:.3},stickyKit:!1,touchMove:!1,forceReflow:!1}}(jQuery);
